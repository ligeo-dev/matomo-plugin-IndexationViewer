(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t(require("CoreHome"),require("vue"),require("CorePluginsAdmin")):"function"===typeof define&&define.amd?define(["CoreHome",,"CorePluginsAdmin"],t):"object"===typeof exports?exports["IndexationViewer"]=t(require("CoreHome"),require("vue"),require("CorePluginsAdmin")):e["IndexationViewer"]=t(e["CoreHome"],e["Vue"],e["CorePluginsAdmin"])})("undefined"!==typeof self?self:this,(function(e,t,n){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="plugins/IndexationViewer/vue/dist/",n(n.s="fae3")}({"19dc":function(t,n){t.exports=e},"8bbf":function(e,n){e.exports=t},a5a2:function(e,t){e.exports=n},fae3:function(e,t,n){"use strict";if(n.r(t),n.d(t,"IndexationViewer",(function(){return x})),"undefined"!==typeof window){var i=window.document.currentScript,o=i&&i.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);o&&(n.p=o[1])}var a=n("8bbf"),r={class:"row"},l={class:"segments col s4 m3 l2"},c={class:"statuses col s4 m3 l2"},s={class:"index"},u={class:"name"},d={class:"index"},b={class:"name"},m={key:0},p={colspan:"4"},f={colspan:"5"},g={class:"loadingPiwik"},O=Object(a["createElementVNode"])("img",{src:"/plugins/Morpheus/images/loading-blue.gif",alt:""},null,-1),j={colspan:"5",class:"paging"};function S(e,t,n,i,o,S){var h=Object(a["resolveComponent"])("Field"),v=Object(a["resolveComponent"])("ContentBlock"),V=Object(a["resolveDirective"])("content-table");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",null,[Object(a["createVNode"])(v,{"content-title":e.translate("IndexationViewer_IndexTitle")},{default:Object(a["withCtx"])((function(){var n,i,o;return[Object(a["createElementVNode"])("div",r,[Object(a["createElementVNode"])("div",null,[Object(a["createElementVNode"])("div",l,[Object(a["createVNode"])(h,{title:e.translate("IndexationViewer_SelectSegment"),uicontrol:"select",name:"selectedSegment","model-value":e.selectedSegment,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.onSelectSegment(t)}),"full-width":!0,options:e.segments},null,8,["title","model-value","options"])]),Object(a["createElementVNode"])("div",c,[Object(a["createVNode"])(h,{title:e.translate("IndexationViewer_SelectStatus"),uicontrol:"select",name:"selectedStatus","model-value":e.selectedStatus,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.onSelectStatus(t)}),"full-width":!0,options:e.statuses},null,8,["title","model-value","options"])])]),Object(a["withDirectives"])(Object(a["createElementVNode"])("table",null,[Object(a["createElementVNode"])("thead",null,[Object(a["createElementVNode"])("tr",null,[Object(a["createElementVNode"])("th",s,Object(a["toDisplayString"])(e.translate("General_Id")),1),Object(a["createElementVNode"])("th",u,Object(a["toDisplayString"])(e.translate("General_Name")),1),Object(a["createElementVNode"])("th",null,Object(a["toDisplayString"])(e.translate("IndexationViewer_Period")),1),Object(a["createElementVNode"])("th",null,Object(a["toDisplayString"])(e.translate("IndexationViewer_IndexedAt")),1),Object(a["createElementVNode"])("th",null,Object(a["toDisplayString"])(e.translate("IndexationViewer_Status")),1)])]),Object(a["createElementVNode"])("tbody",null,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(e.indexationStatuses,(function(t,n){return Object(a["openBlock"])(),Object(a["createElementBlock"])("tr",{class:"indexationViewer-table-row",key:n},[Object(a["createElementVNode"])("td",d,Object(a["toDisplayString"])(t.id_archive),1),Object(a["createElementVNode"])("td",b,Object(a["toDisplayString"])(t.name),1),Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(e.prettyPrintPeriod(t)),1),Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(t.ts_archived),1),Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(t.value),1)])})),128)),e.isLoading||0!==(null===(n=e.indexationStatuses)||void 0===n?void 0:n.length)?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createElementBlock"])("tr",m,[Object(a["createElementVNode"])("td",p,Object(a["toDisplayString"])(e.translate("General_SearchNoResults")),1)])),Object(a["withDirectives"])(Object(a["createElementVNode"])("tr",null,[Object(a["createElementVNode"])("td",f,[Object(a["createElementVNode"])("span",g,[O,Object(a["createTextVNode"])(" "+Object(a["toDisplayString"])(e.translate("General_Loading")),1)])])],512),[[a["vShow"],e.isLoading]]),Object(a["withDirectives"])(Object(a["createElementVNode"])("tr",null,[Object(a["createElementVNode"])("td",j,[Object(a["withDirectives"])(Object(a["createElementVNode"])("span",{class:"previous",onClick:t[3]||(t[3]=function(t){return e.previousPage()}),style:{"padding-right":"1rem"}},[Object(a["createElementVNode"])("a",{class:"btn",onClick:t[2]||(t[2]=Object(a["withModifiers"])((function(){}),["prevent"]))},[Object(a["createElementVNode"])("span",null,"« "+Object(a["toDisplayString"])(e.translate("General_Previous")),1)])],512),[[a["vShow"],e.page>1]]),Object(a["withDirectives"])(Object(a["createElementVNode"])("span",{class:"next",onClick:t[5]||(t[5]=function(t){return e.nextPage()})},[Object(a["createElementVNode"])("a",{class:"btn",onClick:t[4]||(t[4]=Object(a["withModifiers"])((function(){}),["prevent"]))},[Object(a["createElementVNode"])("span",null,Object(a["toDisplayString"])(e.translate("General_Next"))+" »",1)])],512),[[a["vShow"],(null===(i=e.indexationStatuses)||void 0===i?void 0:i.length)===e.limitPerPage]])])],512),[[a["vShow"],e.page>1||(null===(o=e.indexationStatuses)||void 0===o?void 0:o.length)===e.limitPerPage]])])],512),[[V]])])]})),_:1},8,["content-title"])])}var h=n("19dc"),v=n("a5a2"),V=Object(a["defineComponent"])({data:function(){return{page:1,isLoading:!0,statuses:[{key:"",value:Object(h["translate"])("IndexationViewer_AnyStatus")},{key:"DONE_OK",value:Object(h["translate"])("IndexationViewer_StatusDoneOK")},{key:"DONE_ERROR",value:Object(h["translate"])("IndexationViewer_StatusDoneError")},{key:"DONE_INVALIDATED",value:Object(h["translate"])("IndexationViewer_StatusDoneInvalidated")}],selectedStatus:"",segments:[],selectedSegment:"",indexationStatuses:[]}},props:{limitPerPage:{type:Number,default:15}},methods:{fetchSegments:function(){var e=this,t={method:"IndexationViewer.getSegmentOptions"};h["AjaxHelper"].fetch(t).catch((function(e){h["NotificationsStore"].show({message:e.message||e,context:"error",type:"transient"})})).then((function(t){Array.isArray(t)&&(e.segments=t.map((function(e){return{key:e.definition,value:e.name}})))}))},update:function(){var e=this;this.isLoading=!0,this.indexationStatuses=[],this.getIndexationStatuses({segment:this.selectedSegment,status:this.selectedStatus,page:this.page,limitPerPage:this.limitPerPage}).catch((function(e){return h["NotificationsStore"].show({message:e.message||e,context:"error",type:"transient"}),[]})).then((function(t){e.indexationStatuses=t})).finally((function(){e.isLoading=!1}))},onSelectSegment:function(e){this.selectedSegment=e,this.update()},onSelectStatus:function(e){this.selectedStatus=e,this.update()},onSearchKeydown:function(e){"Enter"===e.code&&this.update()},previousPage:function(){this.page>0&&(this.page-=1,this.update())},nextPage:function(){var e;null!==(e=this.indexationStatuses)&&void 0!==e&&e.length&&(this.page+=1,this.update())},prettyPrintPeriod:function(e){return h["Periods"].parse(e.period,e.period_begin_date).getPrettyString()}},setup:function(){var e=null,t=function(t){e&&(e.abort(),e=null),e=new AbortController;var n=Object.assign(Object.assign({},t),{},{method:"IndexationViewer.getIndexationStatuses"}),i={abortController:e,createErrorNotification:!1};return h["AjaxHelper"].fetch(n,i).finally((function(){e=null}))};return{getIndexationStatuses:t}},created:function(){this.fetchSegments()},mounted:function(){this.update()},name:"IndexationViewer",components:{ContentBlock:h["ContentBlock"],Field:v["Field"]},directives:{ContentTable:h["ContentTable"]}});V.render=S;var x=V}})}));
//# sourceMappingURL=IndexationViewer.umd.min.js.map